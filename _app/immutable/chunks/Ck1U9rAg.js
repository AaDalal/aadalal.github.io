var q=Object.defineProperty;var k=t=>{throw TypeError(t)};var z=(t,e,s)=>e in t?q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var w=(t,e,s)=>z(t,typeof e!="symbol"?e+"":e,s),B=(t,e,s)=>e.has(t)||k("Cannot "+s);var a=(t,e,s)=>(B(t,e,"read from private field"),s?s.call(t):e.get(t)),v=(t,e,s)=>e.has(t)?k("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),Y=(t,e,s,r)=>(B(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s);import{F as x,G as H,I as y,J,K as F,L as U,h as D,i as K,M as Q,N as V,O as W,d as X,P as j,Q as ee,R as te,S as se,s as ae,T as C,U as re,V as ie,W as ne,x as O,X as fe,Y as ce,g as de,Z as he,E as ue,_ as _e,a0 as oe,b as le,a as ve,a1 as be,a2 as ge,a3 as Se,a4 as me,a5 as Pe,a6 as pe}from"./FR1t_9wV.js";var _,o,u,b,p,E,T;class Ee{constructor(e,s=!0){w(this,"anchor");v(this,_,new Map);v(this,o,new Map);v(this,u,new Map);v(this,b,new Set);v(this,p,!0);v(this,E,()=>{var e=x;if(a(this,_).has(e)){var s=a(this,_).get(e),r=a(this,o).get(s);if(r)H(r),a(this,b).delete(s);else{var c=a(this,u).get(s);c&&(a(this,o).set(s,c.effect),a(this,u).delete(s),c.fragment.lastChild.remove(),this.anchor.before(c.fragment),r=c.effect)}for(const[i,f]of a(this,_)){if(a(this,_).delete(i),i===e)break;const n=a(this,u).get(f);n&&(y(n.effect),a(this,u).delete(f))}for(const[i,f]of a(this,o)){if(i===s||a(this,b).has(i))continue;const n=()=>{if(Array.from(a(this,_).values()).includes(i)){var l=document.createDocumentFragment();Q(f,l),l.append(F()),a(this,u).set(i,{effect:f,fragment:l})}else y(f);a(this,b).delete(i),a(this,o).delete(i)};a(this,p)||!r?(a(this,b).add(i),J(f,n,!1)):n()}}});v(this,T,e=>{a(this,_).delete(e);const s=Array.from(a(this,_).values());for(const[r,c]of a(this,u))s.includes(r)||(y(c.effect),a(this,u).delete(r))});this.anchor=e,Y(this,p,s)}ensure(e,s){var r=x,c=V();if(s&&!a(this,o).has(e)&&!a(this,u).has(e))if(c){var i=document.createDocumentFragment(),f=F();i.append(f),a(this,u).set(e,{effect:U(()=>s(f)),fragment:i})}else a(this,o).set(e,U(()=>s(this.anchor)));if(a(this,_).set(r,e),c){for(const[n,d]of a(this,o))n===e?r.skipped_effects.delete(d):r.skipped_effects.add(d);for(const[n,d]of a(this,u))n===e?r.skipped_effects.delete(d.effect):r.skipped_effects.add(d.effect);r.oncommit(a(this,E)),r.ondiscard(a(this,T))}else D&&(this.anchor=K),a(this,E).call(this)}}_=new WeakMap,o=new WeakMap,u=new WeakMap,b=new WeakMap,p=new WeakMap,E=new WeakMap,T=new WeakMap;function Ie(t,e,s=!1){D&&X();var r=new Ee(t),c=s?j:0;function i(f,n){if(D){const l=ee(t)===te;if(f===l){var d=se();ae(d),r.anchor=d,C(!1),r.ensure(f,n),C(!0);return}}r.ensure(f,n)}W(()=>{var f=!1;e((n,d=!0)=>{f=!0,i(d,n)}),f||i(!1,null)},c)}let R=!1;function Ae(t){var e=R;try{return R=!1,[t(),R]}finally{R=e}}function ye(t,e,s,r){var M;var c=!ve||(s&be)!==0,i=(s&oe)!==0,f=(s&Se)!==0,n=r,d=!0,l=()=>(d&&(d=!1,n=f?le(r):r),n),S;if(i){var G=Pe in t||pe in t;S=((M=re(t,e))==null?void 0:M.set)??(G&&e in t?h=>t[e]=h:void 0)}var m,L=!1;i?[m,L]=Ae(()=>t[e]):m=t[e],m===void 0&&r!==void 0&&(m=l(),S&&(c&&ie(),S(m)));var g;if(c?g=()=>{var h=t[e];return h===void 0?l():(d=!0,h)}:g=()=>{var h=t[e];return h!==void 0&&(n=void 0),h===void 0?n:h},c&&!(s&ne))return g;if(S){var Z=t.$$legacy;return function(h,A){return arguments.length>0?((!c||!A||Z||L)&&S(A?g():h),h):g()}}var I=!1,P=(s&ge?ue:_e)(()=>(I=!1,g()));i&&O(P);var $=de;return function(h,A){if(arguments.length>0){const N=A?O(P):c&&i?fe(h):h;return ce(P,N),I=!0,n!==void 0&&(n=N),h}return me&&I||$.f&he?P.v:O(P)}}export{Ee as B,Ie as i,ye as p};
